---
name: task-from-daily
description: 日報からタスク候補を抽出してnbに登録
allowed-tools: Read, Bash, AskUserQuestion
version: 1.0.0
---

# 日報からタスク抽出

日報のメモ・サマリーからタスク候補を抽出し、未登録のものをnbタスクとして登録する。

## 引数

$ARGUMENTS

- 引数なし: 過去7日分
- 数字: 過去N日分（例: `3` で過去3日分）

## 日報の場所

`~/.nb/daily/YYYY-MM-DD.md`

## 手順

1. 指定期間の日報を読み込む
2. 「💡 メモ」「📝 今日のサマリー」セクションからタスク候補を抽出
3. 既存の未完了タスク一覧を取得
4. 候補と既存タスクを比較して類似判定
5. 未タスク化のものをユーザーに提案
6. 承認されたものを `nb tasks:add` でタスク登録

## タスク性の判定基準

**タスクとして扱う:**
- 「〜する」「〜したい」「〜が必要」等の行動意図
- 具体的なアクション（「修正」「追加」「確認」「調査」等）
- 未完了を示唆する表現（「まだ」「残り」「TODO」等）

**タスクとして扱わない:**
- 感想・所感（「〜だった」「〜と思った」）
- 学び・気づき（「〜がわかった」「〜を学んだ」）
- 単なる事実の記録（「〜した」「〜を実施」）

## 類似判定

既存タスクとの類似判定は意味的に行う：
- 同じ作業を指していると判断されたものは類似としてスキップ
- 文脈を考慮した柔軟な判定

## 既存タスク取得コマンド

```bash
nb tasks:todos --fields=title
```

## タスク登録コマンド

```bash
nb tasks:add --content "# [ ] タスク名

## Tags

#inbox

## Description

日報からの抽出: YYYY-MM-DD セクション名
" --filename "$(date +%Y%m%d%H%M%S).todo.md"
```

## 出力形式

```
## 日報から検出 (X件中 Y件が未タスク化)

1. 「タスク候補名」
   📍 2025-12-19 サマリー
   → タスク化する？ [Y/n]

2. 「別のタスク候補」
   📍 2025-12-18 メモ
   → スキップ: 既存タスク「○○」と類似
```

## エラー処理

| 状況 | 対応 |
|------|------|
| 対象期間の日報が0件 | 「対象期間に日報が見つかりません」と表示して終了 |
| タスク候補が0件 | 「タスク候補が見つかりませんでした」と表示して終了 |
| すべて既存タスクと類似 | 「新規タスク候補はありませんでした」と表示して終了 |

## 重要なルール

1. 各タスク候補について個別にユーザー確認を取る
2. 承認されたもののみ登録
3. 登録後は登録したタスクの一覧を表示
