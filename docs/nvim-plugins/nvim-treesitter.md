# nvim-treesitter

Tree-sitter パーサーを使ったシンタックスハイライト・インデント・テキストオブジェクト強化プラグイン。

設定ファイル: `config/nvim/lua/plugins/nvim-treesitter.lua`

---

## クイックリファレンス

| キー / コマンド | 説明 |
|---|---|
| `<C-space>` | 選択範囲を段階的に拡大（ノード単位） |
| `<C-backspace>` | 選択範囲を段階的に縮小 |
| `af` / `if` | 関数全体 / 関数内部を選択（テキストオブジェクト） |
| `ac` / `ic` | クラス全体 / クラス内部を選択（テキストオブジェクト） |
| `]m` / `[m` | 次 / 前の関数開始へ移動 |
| `]]` / `[[` | 次 / 前のクラスへ移動 |
| `:TSUpdate` | インストール済みパーサーを最新版に更新 |
| `:TSInstall {lang}` | 指定言語のパーサーをインストール |

---

## 詳細

### 段階的選択（Incremental Selection）

ノード単位で選択範囲を広げたり縮めたりできる。

- `<C-space>` — 選択開始 / ノード単位で選択拡大
- `<C-s>` — スコープ単位で選択拡大
- `<C-backspace>` — ノード単位で選択縮小

### テキストオブジェクト選択（nvim-treesitter-textobjects）

`v` / `d` / `y` などと組み合わせて使う（例: `vaf` で関数全体を選択）。

- `af` — 関数全体（`@function.outer`）
- `if` — 関数内部（`@function.inner`）
- `ac` — クラス全体（`@class.outer`）
- `ic` — クラス内部（`@class.inner`）
- `aa` — 引数全体（`@parameter.outer`）
- `ia` — 引数内部（`@parameter.inner`）

### テキストオブジェクト移動（nvim-treesitter-textobjects）

関数・クラスの定義間をジャンプリストに記録しながら移動できる。

- `]m` — 次の関数開始へ
- `]M` — 次の関数終了へ
- `][` — 次のクラス終了へ
- `]]` — 次のクラス開始へ
- `[m` — 前の関数開始へ
- `[M` — 前の関数終了へ
- `[]` — 前のクラス終了へ
- `[[` — 前のクラス開始へ

### コマンド

- `:TSInstall {language}` — 指定言語のパーサーをインストール
- `:TSUpdate` — 全パーサーを最新版に更新
- `:TSUninstall {language}` — 指定言語のパーサーを削除
- `:TSLog` — treesitter のログを表示

---

## 注意事項

- アップグレード後は必ず `:TSUpdate` を実行すること
- Python のインデントは既知の問題があるため無効化済み（LSP インデントが使われる）
- 100KB 以上のファイルではハイライトが自動無効化（パフォーマンス対策）
