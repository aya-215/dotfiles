# mini.pairs

括弧・クォートを自動でペアリングする最小限のNeovimプラグイン

設定ファイル: `config/nvim/lua/plugins/mini-pairs.lua`

---

## クイックリファレンス

| キー | 説明 |
|---|---|
| `(` `[` `{` | 開き括弧を入力すると閉じ括弧も自動補完 |
| `"` `'` `` ` `` | クォートを入力するとペアを自動補完 |
| `)` `]` `}` | 閉じ括弧がすでにある場合はスキップ（上書きしない） |
| `<BS>` | ペア内でバックスペースするとペア全体を削除 |
| `<CR>` | ペア内で改行するとインデント付きで閉じ括弧を次行に移動 |

---

## 詳細

### 自動ペアリング対象

| 入力 | 補完結果 | 動作 |
|---|---|---|
| `(` | `()` | open |
| `[` | `[]` | open |
| `{` | `{}` | open |
| `)` | `()` | close（スキップ） |
| `]` | `[]` | close（スキップ） |
| `}` | `{}` | close（スキップ） |
| `"` | `""` | closeopen |
| `'` | `''` | closeopen（アルファベット直後は補完しない） |
| `` ` `` | ` `` ` | closeopen |

### 有効モード

| モード | 有効 |
|---|---|
| Insert | ✅ |
| Command | ❌ |
| Terminal | ❌ |

### Lua API

- `MiniPairs.map()` — グローバルマッピングを追加
- `MiniPairs.map_buf()` — バッファローカルマッピングを追加
- `MiniPairs.open()` — 開き括弧の処理ロジック
- `MiniPairs.close()` — 閉じ括弧の処理ロジック
- `MiniPairs.closeopen()` — 対称文字（クォート等）の処理ロジック
- `MiniPairs.bs()` — バックスペース処理
- `MiniPairs.cr()` — 改行処理

---

## 注意事項

- バッファごとに `vim.b.minipairs_disable = true` で無効化できる
- `'` はアルファベット直後では補完されない（`neigh_pattern = "[^%a\\]."` のため）
- `<BS>` / `<CR>` のペア処理は `register = { cr = false }` で無効化可能
- スマートな補完判定はしない。ほぼ常にペア補完が実行される
