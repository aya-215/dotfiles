# tmux ガイド

## 基本

WezTerm起動時にtmuxセッションへ自動接続される。
セッションはターミナルを閉じても永続し、15分間隔で自動保存・起動時に自動復元される。

prefix: `C-q` (Ctrl+q)

## セッション操作

| キー / コマンド | 動作 |
|---|---|
| `C-q d` | デタッチ（セッションを残してtmuxから抜ける） |
| `C-q g` | プロジェクトセッションピッカー（fzf popup） |
| `tl` | セッション一覧 |
| `ta <name>` | セッションにアタッチ |
| `tms` | プロジェクトディレクトリからセッション作成/切替 |
| `tsw` | 既存セッション間をfzfで切替 |
| `tks <name>` | セッションを削除 |
| `tkss` | 全セッションを削除 |

## ウィンドウ操作（タブ相当）

| キー | 動作 |
|---|---|
| `C-q c` | 新しいウィンドウ（カレントディレクトリ） |
| `C-q 1-9` | ウィンドウ番号で移動 |
| `C-q n` | 次のウィンドウ |
| `C-q p` | 前のウィンドウ |
| `C-q <` | ウィンドウを左に移動 |
| `C-q >` | ウィンドウを右に移動 |
| `C-q X` | ウィンドウを閉じる |

## ペイン操作（画面分割）

| キー | 動作 |
|---|---|
| `C-q v` | 縦分割（右にペイン追加） |
| `C-q s` | 横分割（下にペイン追加） |
| `C-q h/j/k/l` | ペイン移動 |
| `C-q z` | ペインのズームトグル |
| `C-q x` | ペインを閉じる |
| `C-q b` | ペインを別ウィンドウに分離 |

## コピーモード

| キー | 動作 |
|---|---|
| `C-q [` | コピーモード開始 |
| `h/j/k/l` | カーソル移動（vi風） |
| `v` | 選択開始 |
| `y` | コピー（Windowsクリップボードに反映） |
| `q` / `Escape` | コピーモード終了 |
| `/` | 検索 |

## セッション復元

自動で動作する（continuum + resurrect）。手動で復元したい場合:

| キー | 動作 |
|---|---|
| `C-q Ctrl+s` | 手動保存 |
| `C-q Ctrl+r` | 手動復元 |

## よくあるワークフロー

### プロジェクトごとにセッションを分ける

```bash
# tmux内でC-q g → fzfでプロジェクト選択
# または
tms ~/src/github.com/user/project-a
tms ~/src/github.com/user/project-b
```

各セッションが独立したウィンドウ・ペイン構成を持つ。`tsw`でセッション間を切り替える。

### 作業環境の構築例

```
C-q c       # エディタ用ウィンドウ作成
nvim .      # Neovimで編集

C-q c       # サーバー用ウィンドウ作成
npm run dev # 開発サーバー起動

C-q 1       # ウィンドウ1（エディタ）に戻る
C-q v       # 右にペイン分割
lazygit     # Git操作
```

### ターミナルを閉じて翌日再開

1. WezTermを閉じる or WSLを再起動
2. WezTermを開く → 自動でtmuxに接続
3. continuumが前回のウィンドウ/ペイン構成を自動復元
