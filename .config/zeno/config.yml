snippets:
  # Git関連のスニペット
  - name: git status
    keyword: gs
    snippet: git status --short --branch

  - name: git add all
    keyword: gaa
    snippet: git add .

  - name: git commit
    keyword: gc
    snippet: git commit -m "{{commit message}}"

  - name: git push
    keyword: gp
    snippet: git push origin {{branch}}

  # nb関連のスニペット（プレースホルダ付きのみ残す）
  - name: nb search
    keyword: nbs
    snippet: nb search "{{keyword}}"

  - name: nb add note
    keyword: nba
    snippet: nb add "{{title}}"

  - name: nb task add
    keyword: nbta
    snippet: nbt "{{task}}" -d {{due}} -t {{tags}}

completions:
  # nb補完設定
  - name: nb notebooks
    patterns:
      - "^nb (.*)$"
    sourceCommand: "nb notebooks --names --no-color"
    options:
      --prompt: "'Notebook> '"
      --preview: "nb {1}:list --limit 10"

  - name: nb notes
    patterns:
      - "^nb ([^:]+):(.*)$"
    sourceCommand: "nb {1}:list --no-color --filenames"
    options:
      --prompt: "'Note> '"
      --preview: "nb {1}:show {}"

  - name: nb daily notes
    patterns:
      - "^nb daily:(.*)$"
    sourceCommand: "nb daily:list --no-color --filenames"
    options:
      --prompt: "'Daily Note> '"
      --preview: "nb daily:show {}"

  - name: git branches
    patterns:
      - "^git checkout (.*)$"
      - "^git switch (.*)$"
    sourceCommand: "git branch --all | sed 's/^[* ]*//' | sed 's#remotes/origin/##'"
    options:
      --prompt: "'Branch> '"
      --preview: "git log --oneline --graph --color=always {}"

  - name: git modified files
    patterns:
      - "^git add (.*)$"
    sourceCommand: "git status --short | awk '{print $2}'"
    options:
      --prompt: "'Add Files> '"
      --multi: true

  # nb タスクID補完（nbtd, nbtu用）
  - name: nb task id
    patterns:
      - "^nbtd (.*)$"
      - "^nbtu (.*)$"
    sourceCommand: "nb tasks:todos open --no-color | awk '{print $1}' | tr -d '[]'"
    options:
      --prompt: "'Task ID> '"
      --preview: "nb tasks:show {}"
